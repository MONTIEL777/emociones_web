<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detector de Emociones</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-sans bg-gradient-to-r from-gray-800 to-teal-500 text-white text-center p-5">

    <div class="max-w-3xl mx-auto bg-white bg-opacity-10 p-5 rounded-lg shadow-lg">
        <h1 class="text-2xl font-bold text-white mb-5 tracking-widest uppercase">🌟🧘 MINDVIBE: TU ALIADO DIGITAL PARA LA SALUD EMOCIONAL 💙🤖</h1>

        <!-- Información del usuario -->
        <div id="user-info" class="mb-5">
            <p>Bienvenido, {{ usuario }} 👋</p>
        </div>

        <!-- Captura de imagen desde la cámara -->
        <div class="flex flex-col items-center mb-5">
            <video id="video" autoplay class="w-full max-w-xs rounded-lg shadow-md"></video>
            <canvas id="canvas" class="hidden"></canvas>
            <button id="captureBtn" class="bg-gradient-to-r from-red-500 to-teal-500 text-white py-2 px-4 mt-3 rounded-lg shadow-md transition-transform transform hover:scale-105">📷 Tomar Foto</button>
        </div>

        <!-- Subir imagen desde la computadora -->
        <label for="imageUpload" class="bg-gradient-to-r from-red-500 to-teal-500 text-white py-2 px-4 rounded-lg shadow-md cursor-pointer transition-transform transform hover:scale-105 inline-block mb-3">📂 Subir Imagen</label>
        <input type="file" id="imageUpload" accept="image/*" class="hidden">
        
        <button id="sendBtn" class="bg-gradient-to-r from-red-500 to-teal-500 text-white py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 mb-5">🔍 Analizar Emoción</button>

        <!-- Resultado -->
        <div id="result-container" class="bg-black bg-opacity-20 p-4 rounded-lg mb-5">
            <h2 class="text-lg font-semibold">🔎 Emoción Detectada:</h2>
            <p id="emotionResult" class="text-xl font-bold">Esperando...</p>
        </div>

        <!-- Chatbot Interactivo -->
        <div id="chatbot-container" class="bg-white bg-opacity-20 p-5 rounded-lg">
            <h3 class="text-lg font-semibold mb-3">💬 Chatbot:</h3>
            <div id="chatbox" class="h-72 overflow-y-auto p-3 bg-black bg-opacity-30 rounded-lg text-left space-y-2">
                <p><strong>🤖 ALEXIA:</strong> ¡Hola! ¿Cómo te sientes hoy?</p>
            </div>
            <div class="flex mt-3">
                <input type="text" id="userInput" placeholder="Escribe tu mensaje..." class="flex-1 p-2 rounded-l-lg border-none outline-none text-black">
                <button id="sendMessageBtn" class="bg-gradient-to-r from-red-500 to-teal-500 text-white py-2 px-4 rounded-r-lg shadow-md transition-transform transform hover:scale-105">Enviar</button>
            </div>
        </div>
    </div>


    <div style="position: absolute; top: 20px; right: 20px;">
        <div class="dropdown">
          <button class="btn bg-gradient-to-r from-gray-800 to-teal-500 text-white py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            ⚙️ Herramientas
          </button>
          <ul class="dropdown-menu bg-gradient-to-r from-gray-800 to-teal-500 text-white rounded-lg shadow-xl transform scale-95 hover:scale-100 transition-all duration-300 ease-in-out">
            <li><a class="dropdown-item text-white py-3 px-6 hover:bg-gray-700 transition-colors duration-300 ease-in-out rounded-md" href="{{ url_for('estadisticas') }}">📊 Estadísticas</a></li>
            <li><hr class="dropdown-divider border-t-2 border-white opacity-20 my-1"></li>
            <li><a class="dropdown-item text-white py-3 px-6 text-red-500 hover:bg-gray-700 transition-colors duration-300 ease-in-out rounded-md" href="{{ url_for('logout') }}">🚪 Cerrar Sesión</a></li>
          </ul>
        </div>
      </div>
      

      
      
      <style>
        .dropdown-menu {
          animation: slideDown 0.3s ease-out;
        }
      
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      </style>
    

    <script>
        // Recuperar el nombre guardado en localStorage
        const nombreUsuario = localStorage.getItem("nombreUsuario");
    
        // Mostrarlo en la pantalla de bienvenida
        if (nombreUsuario) {
            document.getElementById("user-info").innerHTML = `<p>Bienvenido, ${nombreUsuario} 👋</p>`;
        } else {
            document.getElementById("user-info").innerHTML = `<p>Bienvenido, Invitado 👋</p>`;
        }
    </script>
    
    <script src="/static/js/script.js"></script>
</body>
</html>
